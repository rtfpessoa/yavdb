---
- id: rustsec:cargo:image:RUSTSEC-2019-0014
  title: Flaw in interface may drop uninitialized instance of arbitrary types
  description: |
    Affected versions of this crate would call `Vec::set_len` on an uninitialized
    vector with user-provided type parameter, in an interface of the HDR image
    format decoder. They would then also call other code that could panic before
    initializing all instances.

    This could run Drop implementations on uninitialized types, equivalent to
    use-after-free, and allow an attacker arbitrary code execution.

    Two different fixes were applied. It is possible to conserve the interface by
    ensuring proper initialization before calling `Vec::set_len`. Drop is no longer
    called in case of panic, though.

    Starting from version `0.22`, a breaking change to the interface requires
    callers to pre-allocate the output buffer and pass a mutable slice instead,
    avoiding all unsafe code.
  affected_package: image
  vulnerable_versions:
  - "*"
  severity: high
  package_manager: cargo
  disclosed_date: 2019-08-21
  created_date: 2019-08-21
  last_modified_date: 2019-08-21
  credit:
  - RustSec
  references:
  - https://github.com/image-rs/image/pull/985
  source_url: https://github.com/RustSec/advisory-db/blob/master/crates/image/RUSTSEC-2019-0014.toml
